# ---------------------------------------------------
# Mihomo é…ç½®æ–‡ä»¶ - åŸºäºåŸæœ‰é…ç½®ä¼˜åŒ–æ•´åˆ
# åˆ›å»ºæ—¥æœŸ: 2025-08-13
# é‡å¯å‘½ä»¤: systemctl restart mihomo
# ---------------------------------------------------

# **=============================== åŸºç¡€ä»£ç†è®¾ç½® ===============================**
mixed-port: 7890              # æ··åˆä»£ç†ç«¯å£ (åŒæ—¶æ”¯æŒHTTPå’ŒSOCKS5)
socks-port: 7891              # ä¸“ç”¨SOCKS5ä»£ç†ç«¯å£
port: 7892                    # ä¸“ç”¨HTTPä»£ç†ç«¯å£
redir-port: 7893              # é‡å®šå‘ç«¯å£
tproxy-port: 7894             # TPROXYç«¯å£
allow-lan: true               # å…è®¸å±€åŸŸç½‘è¿æ¥
bind-address: "*"             # ç›‘å¬åœ°å€, "*" è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
mode: rule                    # ä»£ç†æ¨¡å¼: rule(è§„åˆ™), global(å…¨å±€), direct(ç›´è¿)
log-level: info               # æ—¥å¿—çº§åˆ«
ipv6: true                    # å¼€å¯IPv6æ”¯æŒ

# **=============================== ç½‘ç»œä¸è¿æ¥è®¾ç½® ===============================**
unified-delay: true           # ç»Ÿä¸€æ˜¾ç¤ºèŠ‚ç‚¹å»¶è¿Ÿ
tcp-concurrent: true          # å¹¶å‘TCPè¿æ¥ï¼Œå¯åŠ é€Ÿç½‘é¡µåŠ è½½
find-process-mode: strict     # è¿›ç¨‹åŒ¹é…æ¨¡å¼: strict(ä¸¥æ ¼), always(æ€»æ˜¯)
global-client-fingerprint: chrome # å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹
authentication: []            # è®¤è¯è®¾ç½® (ç•™ç©ºè¡¨ç¤ºæ— éœ€å¯†ç )
skip-auth-prefixes:           # è·³è¿‡è®¤è¯çš„IPæ®µ
  - 127.0.0.1/32
lan-allowed-ips:              # å…è®¸å±€åŸŸç½‘è®¿é—®çš„IPæ®µ
  - 0.0.0.0/0
  - ::/0
lan-disallowed-ips: []        # ä¸å…è®¸å±€åŸŸç½‘è®¿é—®çš„IPæ®µ

# **=============================== æ€§èƒ½è°ƒä¼˜ ===============================**
keep-alive-idle: 600          # TCPä¿æ´»ç©ºé—²æ—¶é—´(ç§’)
keep-alive-interval: 30       # TCPä¿æ´»å¿ƒè·³é—´éš”(ç§’)
inbound-tfo: true             # å…¥ç«™TCP Fast Open
outbound-tfo: true            # å‡ºç«™TCP Fast Open
disable-keep-alive: false

# **=============================== æ§åˆ¶é¢æ¿ ===============================**
# external-controller: 127.0.0.1:9090
# secret: "123465."
# external-ui: "./ui"
# external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"

# **=============================== TUN æ¨¡å¼ ===============================**
tun:
  enable: true                # å¯ç”¨TUNæ¨¡å¼
  device: Mihomo              # è™šæ‹Ÿç½‘å¡åç§°
  stack: system               # ç½‘ç»œåè®®æ ˆ: system/gvisor/mixed
  auto-route: true            # è‡ªåŠ¨è®¾ç½®è·¯ç”±è¡¨
  auto-redirect: true         # è‡ªåŠ¨é‡å®šå‘æµé‡åˆ°TUNæ¥å£
  auto-detect-interface: true # è‡ªåŠ¨æ£€æµ‹å‡ºå£ç½‘ç»œæ¥å£
  dns-hijack:                 # DNSåŠ«æŒ
    - any:53
    - tcp://any:53
  strict-route: true          # ä¸¥æ ¼è·¯ç”±æ¨¡å¼
  route-exclude-address: []   # è·¯ç”±æ’é™¤åœ°å€
  mtu: 1500                   # MTUè®¾ç½®
  gso: true                   # å¯ç”¨é€šç”¨åˆ†æ®µå¸è½½
  gso-max-size: 65536
  udp-timeout: 300            # UDP ä¼šè¯ä¿æŒæ—¶é—´

# **=============================== DNS è®¾ç½® ===============================**
dns:
  enable: true                # å¯ç”¨å†…ç½®DNSæœåŠ¡å™¨
  ipv6: true                  # DNSæŸ¥è¯¢ä¹Ÿèµ°IPv6
  listen: 0.0.0.0:1053        # ç›‘å¬åœ°å€å’Œç«¯å£
  prefer-h3: false            # å¦‚æœDNSæœåŠ¡å™¨æ”¯æŒDoH3ä¼šä¼˜å…ˆä½¿ç”¨h3
  respect-rules: true         # è®© DNS è§£æéµå¾ª Clash çš„è·¯ç”±è§„åˆ™
  cache-algorithm: arc        # ä½¿ç”¨æ€§èƒ½æ›´ä¼˜çš„ ARC ç¼“å­˜ç®—æ³•
  cache-size: 2048            # é™åˆ¶ç¼“å­˜å¤§å°
  enhanced-mode: fake-ip      # å¢å¼ºæ¨¡å¼: fake-ip(é«˜æ•ˆ), redir-host
  fake-ip-range: 198.18.0.1/16 # fake-ip åœ°å€èŒƒå›´
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:private_domain,cn_domain"
    - "geosite:connectivity-check"
    - "geosite:private"
    - "rule-set:fake_ip_filter_DustinWin"
    - "+.lan"
    - "+.local"
  use-hosts: false            # ä½¿ç”¨hosts
  use-system-hosts: false     # ä½¿ç”¨ç³»ç»Ÿhosts
  
  default-nameserver:
    - 1.1.1.1                 # Cloudflare Public DNS (UDP)
    - 8.8.8.8                 # Google Public DNS (UDP)

  nameserver:                 # é»˜è®¤ DNSï¼Œä¾›æ‰€æœ‰è¯·æ±‚ä½¿ç”¨
    - https://1.1.1.1/dns-query    # Cloudflareï¼ˆæ”¯æŒ H3ï¼‰
    - https://dns.google/dns-query # Googleï¼ˆæ”¯æŒ H3ï¼‰
    - 1.1.1.1                      # Cloudflare Public DNS (UDP)
    - 8.8.8.8                      # Google Public DNS (UDP)

  nameserver-policy:
    "geosite:cn,private":           # å›½å†…åŸŸåå’Œç§æœ‰åŸŸåå¼ºåˆ¶èµ°å›½å†… DNS
      - https://223.5.5.5/dns-query # é˜¿é‡Œ
      - https://doh.pub/dns-query   # è…¾è®¯
      - 223.5.5.5                   # é˜¿é‡Œ UDP
      - 119.29.29.29                # è…¾è®¯ UDP
    "geo:cn":                       # ä¹Ÿå¯ä»¥ç”¨ geo:cn åŒ¹é… IP
      - https://223.5.5.5/dns-query
      - https://doh.pub/dns-query
      - 223.5.5.5                   # é˜¿é‡Œ UDP
      - 119.29.29.29                # è…¾è®¯ UDP
    "geosite:gfw":                  # GFW åˆ—è¡¨åŸŸåå¼ºåˆ¶èµ°å›½å¤– DNS
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8
    "geosite:geolocation-!cn":      # éä¸­å›½å¤§é™†åŸŸåå¼ºåˆ¶èµ°å›½å¤– DNS
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8
    "rule-set:private_domain,cn_domain": 223.5.5.5
    "rule-set:geolocation-!cn":
      - "https://1.1.1.1/dns-query"
      - "https://dns.google/dns-query"

  fallback:
    - 1.1.1.1                       # Cloudflare DNSå¤‡ç”¨
    - 8.8.8.8                       # Google DNSå¤‡ç”¨

  proxy-server-nameserver:          # å½“è¯·æ±‚é€šè¿‡ä»£ç†æ—¶ä½¿ç”¨
    - https://1.1.1.1/dns-query     # Cloudflareï¼ŒDoH3
    - https://dns.google/dns-query  # Googleï¼ŒDoH3
    - 1.1.1.1
    - 8.8.8.8

# **=============================== æµé‡å—…æ¢é…ç½® ===============================**
sniffer:
  enable: true                # å¯ç”¨æµé‡å—…æ¢
  parse-pure-ip: true         # è§£æçº¯IPæµé‡
  force-dns-mapping: true     # å¼ºåˆ¶DNSæ˜ å°„
  override-destination: true  # è¦†ç›–ç›®æ ‡åœ°å€
  sniff:                      # éœ€è¦è¿›è¡Œå—…æ¢çš„åè®®å’Œç«¯å£
    HTTP: 
      ports: [80, 8080-8880]
      override-destination: true
    TLS: 
      ports: [443, 8443]
    QUIC: 
      ports: [443, 8443]
  skip-domain:                # è·³è¿‡å—…æ¢çš„åŸŸå
    - "+.push.apple.com"
    - "+.baidu.com"
    - "+.bilibili.com"
  skip-dst-address:           # è·³è¿‡å—…æ¢çš„ç›®æ ‡IPæ®µ
    - 91.105.192.0/23
    - 91.108.4.0/22
    - 91.108.8.0/21
    - 91.108.16.0/21
    - 91.108.56.0/22
    - 95.161.64.0/20
    - 149.154.160.0/20
    - 185.76.151.0/24
    - 2001:67c:4e8::/48
    - 2001:b28:f23c::/47
    - 2001:b28:f23f::/48
    - 2a0a:f280:203::/48
  force-domain:
    - "+.v2ex.com"

# **=============================== è§„åˆ™æ•°æ®ä¸é…ç½®ç®¡ç† ===============================**
profile:
  store-selected: true        # ä¿å­˜ä¸Šæ¬¡é€‰æ‹©çš„èŠ‚ç‚¹
  store-fake-ip: true         # ä¸ºFake-IPæ¨¡å¼ä¸‹çš„è¿æ¥ä¿ç•™çœŸå®IP

geo-auto-update: true         # è‡ªåŠ¨æ›´æ–°GeoIPå’ŒGeositeæ•°æ®åº“
geo-update-interval: 48       # æ•°æ®åº“æ›´æ–°é—´éš” (å°æ—¶)
geodata-mode: true            # å¯ç”¨åœ°ç†æ•°æ®æ¨¡å¼
geodata-loader: memconservative # GEO æ•°æ®åº“åŠ è½½æ¨¡å¼

geox-url:                     # GeoXæ•°æ®åº“ä¸‹è½½åœ°å€
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.metadb"

# **=============================== ä»£ç†é…ç½®é”šç‚¹ ===============================**
dy: &dy
  type: http
  udp: true
  interval: 86400
  proxy: DIRECTLY
  lazy: true
  health-check:
    enable: true
    url: https://cp.cloudflare.com/generate_204
    interval: 600
    timeout: 5
    lazy: true
    expected-status: "204"
    method: HEAD

# **=============================== ä»£ç†æä¾›è€… ===============================**
# proxy-providers:
#   # æ‚¨å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé…ç½®æœºåœºè®¢é˜…
#   # p1:
#   #   url: ""
#   #   path: ./proxy_provider/p1.yaml
#   #   <<: *dy
#   #   override:
#   #     additional-prefix: "p1 Â»"

# **=============================== ä»£ç†èŠ‚ç‚¹ ===============================**
+proxies:
  - name: "ğŸŸ¢æœ¬åœ°ç›´è¿"
    type: direct
    udp: true

# **=============================== ç­–ç•¥ç»„ ===============================**
proxy-groups:
  # ä¸»ç­–ç•¥ç»„
  - name: 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
    type: select
    proxies:
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'â™»ï¸è‡ªåŠ¨é€‰æ‹©'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://raw.githubusercontent.com/Mithcell-Ma/icon/refs/heads/main/Manual_Test_Log.png"

  # æ ¸å¿ƒç­–ç•¥ç»„
  - name: 'ğŸµæ—¥å¸¸ä½å€'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 1200
    tolerance: 50
    filter: 7li7li
    exclude-filter: \s(\d{2,}|[4-9])(\.\d+)?\s?[xXÃ—]|èŒäº‘
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸŒåœ°åŒºé€‰æ‹©'
    type: select
    proxies:
      - 'ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹'
      - 'ğŸ‡¹ğŸ‡¼å°æ¹¾èŠ‚ç‚¹'
      - 'ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹'
      - 'ğŸ‡°ğŸ‡·éŸ©å›½èŠ‚ç‚¹'
      - 'ğŸ‡¸ğŸ‡¬æ–°åŠ å¡èŠ‚ç‚¹'
      - 'ğŸ‡ºğŸ‡¸ç¾å›½èŠ‚ç‚¹'
      - 'ğŸŒå…¶ä»–åœ°åŒº'

  - name: 'ğŸ å›½å¤–å®¶å®½'
    type: url-test
    include-all: true
    filter: Fam|7li7li
    exclude-filter: é¦™æ¸¯|HK|ğŸ‡­ğŸ‡°
    url: 'https://www.gstatic.com/generate_204'
    interval: 600
    tolerance: 50
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    filter: (?i)(?:[xÃ—å€])\s*0\.\d+|0\.\d+\s*(?:[xÃ—å€])|Test|6bcloud|èµ·å¸†
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  # AI ç­–ç•¥ç»„
  - name: 'ğŸ¤–ChatGPT'
    type: select
    proxies:
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ‡ºğŸ‡¸ç¾å›½èŠ‚ç‚¹'
      - 'ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹'
      - 'ğŸ‡¸ğŸ‡¬æ–°åŠ å¡èŠ‚ç‚¹'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://github.com/DustinWin/ruleset_geodata/releases/download/icons/ai.png"

  # åº”ç”¨åˆ†æµç­–ç•¥ç»„
  - name: 'ğŸ“¹YouTube'
    type: select
    proxies:
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png"

  - name: 'ğŸ€Google'
    type: select
    proxies:
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸµTikTok'
    type: select
    proxies:
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/TikTok.png"

  - name: 'ğŸ‘¨ğŸ¿â€ğŸ’»GitHub'
    type: select
    proxies:
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸ¬OneDrive'
    type: select
    proxies:
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/OneDrive.png"

  - name: 'ğŸªŸMicrosoft'
    type: select
    proxies:
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸ“²Telegram'
    type: select
    proxies:
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸ¥NETFLIX'
    type: select
    proxies:
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png"

  - name: 'âœˆï¸Speedtest'
    type: select
    proxies:
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Speedtest.png"

  - name: 'ğŸ’¶PayPal'
    type: select
    proxies:
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸApple'
    type: select
    proxies:
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'

  - name: 'ğŸŸæ¼ç½‘ä¹‹é±¼'
    type: select
    proxies:
      - 'ğŸš€èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸŒåœ°åŒºé€‰æ‹©'
      - 'ğŸµæ—¥å¸¸ä½å€'
      - 'ğŸ å›½å¤–å®¶å®½'
      - 'ğŸ“‰ä¸‹è½½ä¸“ç”¨'
      - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/aihdde/Rules@master/icon/fish.png"

  # åœ°åŒºèŠ‚ç‚¹ç»„
  - name: 'ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 86400
    tolerance: 50
    filter: é¦™æ¸¯|HK|ğŸ‡­ğŸ‡°
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png"

  - name: 'ğŸ‡¹ğŸ‡¼å°æ¹¾èŠ‚ç‚¹'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 86400
    tolerance: 50
    filter: å°æ¹¾|TW|ğŸ‡¹ğŸ‡¼
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 86400
    tolerance: 50
    filter: æ—¥æœ¬|JP|ğŸ‡¯ğŸ‡µ
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png"

  - name: 'ğŸ‡°ğŸ‡·éŸ©å›½èŠ‚ç‚¹'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 86400
    tolerance: 50
    filter: éŸ©å›½|KR|ğŸ‡°ğŸ‡·
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  - name: 'ğŸ‡¸ğŸ‡¬æ–°åŠ å¡èŠ‚ç‚¹'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 86400
    tolerance: 50
    filter: æ–°åŠ å¡|SG|ğŸ‡¸ğŸ‡¬
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png"

  - name: 'ğŸ‡ºğŸ‡¸ç¾å›½èŠ‚ç‚¹'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 86400
    tolerance: 50
    filter: ç¾å›½|US|ğŸ‡ºğŸ‡¸
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png"

  - name: 'ğŸŒå…¶ä»–åœ°åŒº'
    type: url-test
    include-all: true
    url: 'https://www.gstatic.com/generate_204'
    interval: 86400
    tolerance: 50
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®|é¦™æ¸¯|HK|ğŸ‡­ğŸ‡°|å°æ¹¾|TW|ğŸ‡¹ğŸ‡¼|æ—¥æœ¬|JP|ğŸ‡¯ğŸ‡µ|éŸ©å›½|KR|ğŸ‡°ğŸ‡·|æ–°åŠ å¡|SG|ğŸ‡¸ğŸ‡¬|ç¾å›½|US|ğŸ‡ºğŸ‡¸
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

  # è‡ªåŠ¨é€‰æ‹©
  - name: 'â™»ï¸è‡ªåŠ¨é€‰æ‹©'
    type: url-test
    include-all: true
    tolerance: 20
    interval: 300
    # filter: "^((?!(ç›´è¿)).)*$"
    # proxies:
    #   - 'ğŸŸ¢æœ¬åœ°ç›´è¿'

# **=============================== è§„åˆ™é”šç‚¹ ===============================**
rule-anchor:
  ip: &ip 
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
  domain: &domain 
    type: http
    interval: 86400
    behavior: domain
    format: mrs
  class: &class 
    type: http
    interval: 86400
    behavior: classical
    format: text
  yaml: &yaml 
    type: http
    interval: 86400
    behavior: domain
    format: yaml
  classical_yaml: &classical_yaml
    type: http
    interval: 86400
    behavior: classical
    format: yaml

# **=============================== è§„åˆ™æä¾›è€… ===============================**
rule-providers:
  # å¹¿å‘Šè¿‡æ»¤
  AWAvenue_Ads_Rule:
    <<: *yaml
    path: ./ruleset/AWAvenue_Ads_Rule_Clash.yaml
    url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main//Filters/AWAvenue-Ads-Rule-Clash.yaml"

  # fake-ip è¿‡æ»¤
  fake_ip_filter_DustinWin:
    <<: *domain
    path: ./ruleset/fake_ip_filter_DustinWin.mrs
    url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/fakeip-filter.mrs"

  # ç›´è¿ç±»è§„åˆ™
  private_domain:
    <<: *domain
    path: ./ruleset/private_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
    
  cn_domain:
    <<: *domain
    path: ./ruleset/cn_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"
    
  cn_ip:
    <<: *ip
    path: ./ruleset/cn_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"

  # AI è§„åˆ™
  ai:
    <<: *domain
    path: ./ruleset/ai.mrs
    url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/ai.mrs"

  # ä»£ç†ç±»è§„åˆ™
  proxy:
    <<: *domain
    path: ./ruleset/proxy.mrs
    url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/proxy.mrs"
    
  gfw_domain:
    <<: *domain
    path: ./ruleset/gfw_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs"
    
  geolocation-!cn:
    <<: *domain
    path: ./ruleset/geolocation-!cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"

  # åº”ç”¨è§„åˆ™
  github_domain:
    <<: *domain
    path: ./ruleset/github_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"
    
  youtube_domain:
    <<: *domain
    path: ./ruleset/youtube_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"
    
  google_domain:
    <<: *domain
    path: ./ruleset/google_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
    
  tiktok_domain:
    <<: *domain
    path: ./ruleset/tiktok_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs"
    
  telegram_domain:
    <<: *yaml
    path: ./ruleset/telegram_domain.yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml"
    
  telegram_ip:
    <<: *ip
    path: ./ruleset/telegram_ip.mrs
    url: "https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/mihomo-ruleset/telegramip.mrs"
    
  Telegram_No_Resolve:
    <<: *classical_yaml
    path: ./ruleset/Telegram_No_Resolve.yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Telegram/Telegram_No_Resolve.yaml"
    
  netflix_domain:
    <<: *domain
    path: ./ruleset/netflix_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/netflix.mrs"
    
  netflix_ip:
    <<: *ip
    path: ./ruleset/netflix_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs"
    
  onedrive_domain:
    <<: *domain
    path: ./ruleset/onedrive_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs"
    
  microsoft_domain:
    <<: *domain
    path: ./ruleset/microsoft_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"
    
  speedtest_domain:
    <<: *domain
    path: ./ruleset/speedtest_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs"
    
  paypal_domain:
    <<: *domain
    path: ./ruleset/paypal_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.mrs"
    
  apple_cn_domain:
    <<: *domain
    path: ./ruleset/apple_cn_domain.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs"

  # IP è§„åˆ™
  google_ip:
    <<: *ip
    path: ./ruleset/google_ip.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"
    
  geoip_cloudflare:
    <<: *ip
    path: ./ruleset/geoip_cloudflare.mrs
    url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cloudflare.mrs"

# **=============================== è§„åˆ™è®¾ç½® ===============================**
rules:
  # --- æ‹’ç»/é˜»æ­¢ç±»è§„åˆ™ (æœ€é«˜ä¼˜å…ˆçº§ï¼Œç›´æ¥æ‹¦æˆª) ---
  - RULE-SET,AWAvenue_Ads_Rule,REJECT     # ç§‹é£å¹¿å‘Šè¿‡æ»¤

  # --- ä¸ªäººè§„åˆ™ ---
  - IP-CIDR,192.168.0.0/24,ğŸŸ¢æœ¬åœ°ç›´è¿
  - IP-CIDR,192.168.1.0/24,ğŸŸ¢æœ¬åœ°ç›´è¿
  - IP-CIDR,192.168.10.0/24,ğŸŸ¢æœ¬åœ°ç›´è¿
  - IP-CIDR,159.54.178.253/32,ğŸŸ¢æœ¬åœ°ç›´è¿
  - IP-CIDR,152.53.178.102/32,ğŸŸ¢æœ¬åœ°ç›´è¿
  - IP-CIDR,100.95.136.1/32,ğŸŸ¢æœ¬åœ°ç›´è¿

  - DOMAIN-SUFFIX,630516.xyz,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,534612.xyz,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,zfeny.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,zfeny.eu,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,919516.xyz,ğŸŸ¢æœ¬åœ°ç›´è¿

  - DOMAIN,nav-edge.smartscreen.microsoft.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN,lucide.dev,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN,music.youtube.com,ğŸš€èŠ‚ç‚¹é€‰æ‹©

  - DOMAIN-SUFFIX,18comic.vip,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,adobe.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,adobe.io,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,adobess.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,acgrip.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,cnki.net,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,cscecos.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,customercontrolpanel.de,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,deeplx.org,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,dianqilianmeng.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,googlevideo.com,ğŸš€èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,mineru.net,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,mypikpak.com,ğŸ“‰ä¸‹è½½ä¸“ç”¨
  - DOMAIN-SUFFIX,nodeseek.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,icourse163.org,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,ivcbt.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,linux.do,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,mihoyo.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,netcup.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,tendawifi.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,zhihu.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,zhimg.com,ğŸŸ¢æœ¬åœ°ç›´è¿

  - PROCESS-NAME,aria2c_gj4hq.exe,ğŸŸ¢æœ¬åœ°ç›´è¿
  - PROCESS-NAME,Doubao.exe,ğŸŸ¢æœ¬åœ°ç›´è¿
  - PROCESS-NAME,OneDrive.exe,ğŸ“‰ä¸‹è½½ä¸“ç”¨
  - PROCESS-NAME,ssh.exe,ğŸŸ¢æœ¬åœ°ç›´è¿
  - PROCESS-NAME,Termius.exe,ğŸŸ¢æœ¬åœ°ç›´è¿
  - PROCESS-NAME,GoogleDriveFS.exe,ğŸ“‰ä¸‹è½½ä¸“ç”¨
  - PROCESS-NAME,DownloadServer.exe,ğŸ“‰ä¸‹è½½ä¸“ç”¨
  - PROCESS-NAME,PikPak.exe,ğŸ“‰ä¸‹è½½ä¸“ç”¨
  - PROCESS-NAME,steam.exe,ğŸŸ¢æœ¬åœ°ç›´è¿
  - PROCESS-NAME,Wocalcscec.exe,ğŸŸ¢æœ¬åœ°ç›´è¿

  # --- ç²¾ç¡®çš„ IP è§„åˆ™ (å¼ºåˆ¶ no-resolveï¼Œé˜²DNSæ³„æ¼) ---
  - RULE-SET,cn_ip,ğŸŸ¢æœ¬åœ°ç›´è¿,no-resolve            # å›½å†… IP ä¼˜å…ˆç›´è¿
  - RULE-SET,geoip_cloudflare,ğŸ¤–ChatGPT,no-resolve  # Cloudflare IP å¯¼å‘ AI
  - RULE-SET,telegram_ip,ğŸ“²Telegram,no-resolve      # Telegram IP å¼ºåˆ¶èµ°ä»£ç†
  - RULE-SET,Telegram_No_Resolve,ğŸ“²Telegram,no-resolve # Telegram æ— éœ€è§£æçš„è§„åˆ™
  - RULE-SET,netflix_ip,ğŸ¥NETFLIX,no-resolve        # Netflix IP èµ°ä»£ç†

  # --- ç²¾ç¡®çš„ç›´è¿åŸŸåè§„åˆ™ ---
  - RULE-SET,private_domain,ğŸŸ¢æœ¬åœ°ç›´è¿  # è‡ªå®šä¹‰ç§æœ‰åŸŸå
  - RULE-SET,cn_domain,ğŸŸ¢æœ¬åœ°ç›´è¿       # ä¸­å›½å¤§é™†åŸŸå

  # è‹¹æœæœåŠ¡ç›´è¿
  - DOMAIN-SUFFIX,apple.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,icloud.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - DOMAIN-SUFFIX,cdn-apple.com,ğŸŸ¢æœ¬åœ°ç›´è¿
  - RULE-SET,apple_cn_domain,ğŸApple
  - DOMAIN-SUFFIX,ls.apple.com,ğŸŸ¢æœ¬åœ°ç›´è¿

  # --- ç‰¹å®šæœåŠ¡è§„åˆ™ ---
  - PROCESS-NAME-REGEX,.*telegram.*,ğŸ“²Telegram

  # AI æœåŠ¡
  - DOMAIN-SUFFIX,lingq.com,ğŸ¤–ChatGPT
  - DOMAIN-SUFFIX,youglish.com,ğŸ¤–ChatGPT
  - DOMAIN-SUFFIX,deepl.com,ğŸ¤–ChatGPT
  - DOMAIN-SUFFIX,chat.openai.com,ğŸ¤–ChatGPT
  - DOMAIN-SUFFIX,grammarly.com,ğŸ¤–ChatGPT
  - DOMAIN-KEYWORD,sci-hub,ğŸ¤–ChatGPT
  - RULE-SET,ai,ğŸ¤–ChatGPT

  # å­¦ä¹ å¹³å°
  - DOMAIN-SUFFIX,edclub.com,ğŸš€èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,typingclub.com,ğŸš€èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,edclub-cdn.typingclub.com,ğŸš€èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,typingclub-cdn.typingclub.com,ğŸš€èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-KEYWORD,typingclub,ğŸš€èŠ‚ç‚¹é€‰æ‹©

  # åª’ä½“æœåŠ¡
  - RULE-SET,youtube_domain,ğŸ“¹YouTube
  - RULE-SET,tiktok_domain,ğŸµTikTok
  - RULE-SET,netflix_domain,ğŸ¥NETFLIX

  # å…¶ä»–æœåŠ¡
  - RULE-SET,github_domain,ğŸ‘¨ğŸ¿â€ğŸ’»GitHub
  - RULE-SET,onedrive_domain,ğŸ¬OneDrive
  - RULE-SET,speedtest_domain,âœˆï¸Speedtest
  - RULE-SET,telegram_domain,ğŸ“²Telegram
  - RULE-SET,paypal_domain,ğŸ’¶PayPal
  - RULE-SET,microsoft_domain,ğŸªŸMicrosoft
  - RULE-SET,google_domain,ğŸ€Google

  # --- é€šç”¨ä»£ç†è§„åˆ™ ---
  - RULE-SET,gfw_domain,ğŸš€èŠ‚ç‚¹é€‰æ‹© # è¢«GFWé˜»æ–­çš„åŸŸå
  - RULE-SET,geolocation-!cn,ğŸš€èŠ‚ç‚¹é€‰æ‹© # éä¸­å›½å¤§é™†çš„åœ°ç†ä½ç½®æµé‡
  - RULE-SET,proxy,ğŸš€èŠ‚ç‚¹é€‰æ‹© # é€šç”¨ä»£ç†è§„åˆ™

  # å±€åŸŸç½‘å’Œæœ¬åœ°
  - DOMAIN-SUFFIX,local,ğŸŸ¢æœ¬åœ°ç›´è¿
  - IP-CIDR,127.0.0.0/8,ğŸŸ¢æœ¬åœ°ç›´è¿,no-resolve
  - IP-CIDR,192.168.0.0/16,ğŸŸ¢æœ¬åœ°ç›´è¿,no-resolve
  - IP-CIDR,10.0.0.0/8,ğŸŸ¢æœ¬åœ°ç›´è¿,no-resolve
  - IP-CIDR,172.16.0.0/12,ğŸŸ¢æœ¬åœ°ç›´è¿,no-resolve
  - IP-CIDR,172.24.0.0/12,ğŸŸ¢æœ¬åœ°ç›´è¿,no-resolve

  - RULE-SET,google_ip,ğŸ€Google,no-resolve

  # --- æœ€ç»ˆå›é€€è§„åˆ™ ---
  - MATCH,ğŸŸæ¼ç½‘ä¹‹é±¼
